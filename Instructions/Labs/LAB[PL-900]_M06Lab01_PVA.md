---
lab:
    title: 'Задание 8. Как создать простой чат-бот?'
    module: 'Модуль 6. Введение в Power Virtual Agents'
---

# Модуль 6. Введение в Power Virtual Agents
## Задание. Как создать простой чат-бот?

# Сценарий

Bellows College — образовательное учреждение, имеющее на территории своего кампуса несколько зданий. Сейчас для регистрации посетителей кампуса используются бумажные журналы. Информация собирается несогласованно, отсутствуют средства сбора и анализа данных о визитах по всему кампусу.

Как и большинство организаций, Bellows College быстро реагирует на проблемы нехватки информации о COVID-19, лучших методиках работы, расписаниях и т. д. В этом задании вам предстоит создать чат-бот Power Virtual Agent, ориентированный на страницу Центра контроля заболеваемости с вопросами и ответами о текущем состоянии пандемии. Колледжу потребуется такая настройка, чтобы внедрить ее на сайте портала, а также сделать доступной по мере необходимости в процессе планового возобновления работы подразделений.

## Обзор этапов работы

Этапы создания виртуального оператора Power Virtual Agent

  - Зарегистрируйтесь для получения пробной версии Power Virtual Agent.

  - Создайте бот, использующий часто задаваемые вопросы.

  - Протестируйте бот.

  - Измените приветствие по умолчанию.

  - Опубликуйте бот.

  - **Дополнительная задача** Внедрите бот в свой портал.

## Предварительные требования

Для выполнения проекта необходимо выполнить следующие требования.

  - Выполнить **задание 0 модуля 0 «Проверка лабораторной среды»**.

  - Выполнить **задание 1 модуля 2 «Введение в Microsoft Dataverse»**.

  - Требования только для дополнительной задачи Выполнить **задание 4 модуля 6 «Введение в порталы Power Apps»**. 

## Что необходимо знать перед началом работы?

Боты могут быть очень полезны во множестве разных сценариев. Основываясь на текущей информации о Bellows College, подумайте, где еще в организации может пригодиться бот.

# Упражнение 1. Регистрация в PVA и создание нового бота

В этом упражнении вы зарегистрируетесь для получения пробной версии Power Virtual Agents.

1.  Перейдите по ссылке [Power Virtual Agents](https://powerva.microsoft.com/).

2.  Выберите **Начать использовать бесплатную пробную версию**.

3.  При необходимости авторизуйтесь в системе.

4. Должно появиться окно **Создание нового бота**.

5. В поле **Имя** введите **Кризис-бот** и выберите язык.

6. Выберите свою среду «Практика» для создания в ней бота и нажмите **Создать**. Дождитесь создания бота. Нажмите **Обзор бота**, если появится запрос.

7. Протестируйте бот. В поле сообщения введите **Здравствуйте** и нажмите **Отправить**. Бот должен приветствовать вас и рассказать о своих возможностях.

8. Закройте **Чат**.

9. Выберите **Темы**. Бот работает с несколькими пользовательскими и несколькими системными темами. Приветствие по умолчанию выбирается из системной темы.

> В следующем упражнении вы создадите собственные темы по материалам сайта вопросов и ответов CDC. Не выходите из этого окна браузера.

# Упражнение 2. Создание тем

В этом упражнении вы создадите темы по материалам сайта вопросов и ответов CDC.

1.  В новой вкладке перейдите по ссылке [Вопросы и ответы CDC](https://www.cdc.gov/coronavirus/2019-ncov/faq.html) и ознакомьтесь с содержимым этого сайта. Из этих вопросов и ответов вы создадите свои темы.

2.  Скопируйте URL-адрес.

3.  Вернитесь в раздел Power Virtual Agents и убедитесь, что остался выбранным вариант **Темы**.

4.  Под заголовком **Темы** выберите вкладку **Рекомендации**.

5.  Нажмите **Начать**.

6.  Вставьте скопированный ранее URL-адрес в текстовое поле **Ссылка на онлайн-содержимое** и нажмите **Добавить**.

7.  Нажмите **Запуск** и дождитесь выполнения. Это может занять несколько минут.

8.  Вы должны получить несколько предлагаемых для вас тем. Щелчком мыши откройте одну из предложенных тем.

9. Вы должны увидеть триггерную фразу и ответ бота. Нажмите **Добавить в темы**.
    
10. Предлагаемая тема должна добавиться в ваши темы. Выберите все предложенные темы и нажмите **Добавить в темы**. 

    > Вы можете выбрать все темы, используя значок слева от столбца «Имя». Если вы получите сообщение об ошибке, повторите попытку.

11. После добавления предлагаемых тем выберите вкладку **Существующие**. Вы должны увидеть новые темы в выключенном состоянии.

12. Чтобы **включить** некоторые темы, используйте кнопку переключения в столбце **Состояние**. 

13. Запишите триггерную фразу для одной из включенных вами тем, чтобы ее можно было проверить позже.

> Не выходите из этого окна браузера.

# Упражнение 3. Тестирование тем

В этой задаче вы протестируете добавленные вами темы.

1.  Нажмите кнопку **Тестирование бота** в левом нижнем углу.

2.  Нажмите **Сброс**.

3.  Введите триггерную фразу, записанную в предыдущей задаче, и нажмите **Отправить**.

4.  Бот должен дать вам правильную информацию и спросить, ответил ли он на ваш вопрос. Нажмите **Да**.

5.  Бот должен попросить вас оценить его действия. Дайте ему отличную оценку.

6.  Бот должен спросить, может ли он помочь вам еще чем-нибудь. Нажмите **Нет, спасибо**.

7.  Бот должен завершить сеанс чата.

8.  Введите **Здравствуйте** и нажмите **Отправить**.

9.  Бот должен приветствовать вас и рассказать о своих возможностях. Теперь ваш бот сможет отвечать пользователям на часто задаваемые вопросы о COVID-19, поэтому вам понадобится изменить приветственное сообщение в следующей задаче. Не выходите из этого окна браузера.

# Упражнение 4. Изменение приветствия

В этой задаче вы замените приветствие на относящееся к COVID-19.

1.  Убедитесь, что у вас выбран раздел **Темы**, и выберите вкладку **Существующие**.

2.  Сверните раздел **Пользовательские темы**.

3.  Щелчком мыши откройте тему **Приветствие** в системных темах. Можно также использовать поле поиска для **поиска по существующим темам**.

4.  Тема приветствия имеет 52 триггерных фразы. Нажмите кнопку **Перейти на холст разработки**.

5.  Перейдите к первому сообщению и введите вместо него `Hi, I’m a virtual agent. I can tell you about how COVID-19 spreads, how to protect yourself, preparing your home and family for COVID-19, symptoms, testing, and more.`

6.  Нажмите **Сохранить**.

7.  Если ваш бот еще не открыт, нажмите кнопку **Тестирование бота**. Чтобы сбросить чат, нажмите **Сброс**.

8.  Введите «Здравствуйте» и нажмите **Отправить**.

9.  После этого бот должен ответить новым приветствием.

# Упражнение 5. Публикация бота

В этом упражнении вы опубликуете бот.

1.  На левой панели навигации выберите **Опубликовать**.

2.  Нажмите **Опубликовать**.

3.  Еще раз нажмите **Опубликовать** и дождитесь завершения публикации.

4.  На левой панели навигации разверните раздел **Управление** и выберите **Каналы**.

5.  Вы получите список доступных каналов, на которых вы можете опубликовать свой бот. Выберите **Демонстрационный сайт**.

6.  Замените приветственное сообщение на строку `Try my COVID-19 FAQ bot`.

7.  Введите следующие **начальные фразы разговора**:
    ```
     «Кто подвержен максимальному риску серьезного заболевания от COVID-19»
     «Что подразумевается под более серьезным заболеванием»
     «Что предпринимает CDC в отношении COVID-19»
    ```
    
8.  Нажмите **Сохранить**.

9.  Скопируйте **URL-адрес**.

> Вы можете поделиться URL-адресом со своими коллегами и получить от них отзывы. 

10.  В новом окне или новой вкладке браузера откройте скопированный URL-адрес. Демонстрационный веб-сайт должен выглядеть примерно как на следующем изображении.

11. Попробуйте пообщаться с ботом в чате.  
    
По окончании настройки опубликованный бот должен выглядеть примерно так:

![демонстрационный сайт бота, снимок экрана](./media/8-image1.png)

# Задачи повышенной сложности 
* Внедрите своей чат-бот в портал для посетителей Bellows College (подробнее о том, как это сделать, см. в разделе **Добавление бота в Power Apps** по [этой ссылке](https://docs.microsoft.com/ru-ru/power-virtual-agents/publication-connect-bot-to-web-channels)).
